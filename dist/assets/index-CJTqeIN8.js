import{c as m,o as J,k as Q,f as X,E as Y,p as g,i as S,d as y,h as D,R as C,j as k,S as L,T as Z,_ as ee,x as te,q as se,t as H,a1 as ne,a2 as oe,a3 as K,a4 as R}from"./index-D308GNUx.js";import{h as re}from"./index-BQffvJJV.js";var ae=H('<nav><button id=start-button><span id=button-text class="select-none text-base tracking-wide text-neutral-100">Train Model'),ie=H('<article class="mt-20 w-full bg-neutral-50 px-10 py-8 text-neutral-800 shadow-md"><ul class="list-inside list-disc"><p class="my-2 text-base">The Color Picker allows the selecting and matching of WEBTONE colors from an image or other reference work.</p><li class=text-base><strong>Pick a Color:</strong> Use the color picker to reference any color on the screen, not just within the browser window.</li><li class=""><strong>View Details:</strong> Click on a color to see more details.</li><li class=""><strong>Add Color:</strong> Click the plus symbol or the ADD-button, to save the corresponding WEBTONE color to the canvas.</li><li class=""><strong>Refine Selection:</strong> If needed use arrow keys inside the details view to refine the serach.</li><li class=""><strong>Keyboard Shortcuts:</strong> <code class="rounded-md border border-neutral-500 px-2 py-1 text-xs">d</code> to open the picker. <code class="rounded-md border border-neutral-500 px-2 py-1 text-xs">s</code> to save. <code class="rounded-md border border-neutral-500 px-2 py-1 text-xs">esc</code> to abort.'),le=H(`<main class="container relative mx-auto flex min-h-[2200px] max-w-5xl flex-col items-center justify-start"><nav><button id=start-button title="Press 'd' to open, 's' to save, and escape to close."><span id=button-text class="select-none text-base tracking-wide text-neutral-100">Pick Color</span></button></nav><input id=hidden-input hx-trigger=send-color hx-target=#output type=hidden name=colors><section class="mt-12 flex min-h-96 w-full justify-center"><article class="mb-28 mt-12 flex items-center justify-center"id=output>`);const fe=()=>{const[_,W]=m("#e8e4da"),[P,E]=m(0),[ce,h]=m("");m([[0,0],[0,0],[0,0]]);const[T,$]=m(!1),[q,N]=m(),B=m();let x,v,w,j;const M=new AbortController,{addKeys:U,removeKeys:O}=ne($,q,N);J(()=>{z(),w.value=_(),x.addEventListener("click",A),addEventListener("keydown",V)}),Q(()=>{T()?U():O()});const V=n=>{if(n.key==="s"){const a=document.querySelector(".add-icon");if(!a)return;a.click()}else n.key==="d"&&x.click()};X(()=>{x.removeEventListener("click",A),G()});const{initHtmx:z,cleanupHtmx:G}=F(),A=async()=>{v.style.opacity="0.4";try{const t=(await new EyeDropper().open({signal:M.signal})).sRGBHex;w.value=t,W(t),window.htmx.trigger("#hidden-input","send-color"),Y.addAction(t)}catch{v.style.opacity="1"}},I=n=>{const t=n.target.closest(".add-icon");if(!t){$(!0);return}t.classList.add("animate"),setTimeout(()=>t.classList.remove("animate"),210);const i=t.parentElement.dataset.name;!!t.parentElement.dataset.webtone&&oe(K(i))};return(()=>{var n=le(),a=n.firstChild,t=a.firstChild,i=a.nextSibling,f=i.nextSibling,p=f.firstChild,l=x;typeof l=="function"?g(l,t):x=t,S(n,y(L,{when:!1,get children(){var o=ae(),d=o.firstChild,r=j;return typeof r=="function"?g(r,d):j=d,D(c=>{var s=C("mt-28 flex w-full justify-center"),b=C("relative h-12 min-w-44 border border-neutral-500 bg-neutral-800 uppercase transition-transform duration-100 hover:scale-[1.01]");return s!==c.e&&k(o,c.e=s),b!==c.t&&k(d,c.t=b),c},{e:void 0,t:void 0}),o}}),i);var e=w;typeof e=="function"?g(e,i):w=i,S(n,y(L,{get when(){return Z()},get children(){return ie()}}),f),p.$$click=I;var u=v;return typeof u=="function"?g(u,p):v=p,S(n,y(L,{get when(){return T()},get children(){return y(ee,{ref:B,active:q,setPortal:$})}}),null),D(o=>{var d=C("mt-28 flex w-full justify-center"),r=C("relative h-12 min-w-44 border border-neutral-500 bg-neutral-800 uppercase transition-transform duration-100 hover:scale-[1.01]"),c=R.api;return d!==o.e&&k(a,o.e=d),r!==o.t&&k(t,o.t=r),c!==o.a&&te(i,"hx-get",o.a=c),o},{e:void 0,t:void 0,a:void 0}),n})();function F(){const n=()=>{window.htmx.process(document.body),window.htmx.config.withCredentials=!0,window.htmx.config.globalViewTransitions=!0,window.htmx.config.methodsThatUseUrlParams=[],addEventListener("htmx:beforeRequest",i),addEventListener("htmx:configRequest",t),addEventListener("htmx:afterSwap",f),addEventListener("htmx:afterSettle",p)},a=()=>{window.htmx.config.withCredentials=!1,removeEventListener("htmx:beforeRequest",i),removeEventListener("htmx:configRequest",t),removeEventListener("htmx:afterSwap",f),removeEventListener("htmx:afterSettle",p)},t=l=>{const u=l.detail.parameters.colors.substring(1);if(R.api.includes("localhost")){l.detail.path=R.api+u;return}l.detail.path+=u},i=l=>{l.detail.xhr.setRequestHeader("Authorization","edor-o9e8-f5p7-x85v")},f=l=>{v.style.opacity="1",re(_(),!0)},p=async l=>{const e=window.jsonData.conversions.web,u=e.hueClass,o=e.shadeClass,d=e.chromaClass;let r=null;if(u===0&&o===0&&d===0){const s=/\d+/,b=e.code.match(s);b&&(r=`[-1,${b[0]},-1]`)}P()==0?(E(s=>s+1),h(r?`[${r},`:`[[${e.hueClass},${e.shadeClass},${e.chromaClass}],`)):P()==1?(E(s=>s+1),h(r?s=>s+`${r},`:s=>s+`[${e.hueClass},${e.shadeClass},${e.chromaClass}],`)):(h(r?s=>s+`${r}]`:s=>s+`[${e.hueClass},${e.shadeClass},${e.chromaClass}]]`),E(0));const c=K(e.code);N(c)};return{initHtmx:n,cleanupHtmx:a}}};se(["click"]);export{fe as default};
