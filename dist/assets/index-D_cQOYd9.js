import{c as m,o as J,k as O,f as Q,E as X,p as g,i as N,d as k,h as T,R as y,j as C,S as A,Z as Y,x as ee,q as te,t as M,a0 as ne,a1 as se,a2 as K,a3 as L}from"./index-4EUHjey6.js";import{h as ae}from"./index-BQffvJJV.js";var re=M('<nav><button id=start-button><span id=button-text class="select-none text-base tracking-wide text-neutral-100">Train Model'),oe=M(`<main class="container relative mx-auto flex min-h-[2200px] max-w-5xl flex-col items-center justify-start"><nav><button id=start-button title="Press 'd' to open, 's' to save, and escape to close."><span id=button-text class="select-none text-base tracking-wide text-neutral-100">Pick Color</span></button></nav><input id=hidden-input hx-trigger=send-color hx-target=#output type=hidden name=colors><section class="mt-12 flex min-h-96 w-full justify-center"><article class="mb-28 mt-12 flex items-center justify-center"id=output>`);const me=()=>{const[S,W]=m("#e8e4da"),[H,$]=m(0),[ie,f]=m("");m([[0,0],[0,0],[0,0]]);const[R,E]=m(!1),[q,_]=m(),B=m();let p,v,w,P;const D=new AbortController,{addKeys:U,removeKeys:z}=ne(E,q,_);J(()=>{V(),w.value=S(),p.addEventListener("click",j),addEventListener("keydown",G)}),O(()=>{R()?U():z()});const G=s=>{if(s.key==="s"){const o=document.querySelector(".add-icon");if(!o)return;o.click()}else s.key==="d"&&p.click()};Q(()=>{p.removeEventListener("click",j),Z()});const{initHtmx:V,cleanupHtmx:Z}=I(),j=async()=>{v.style.opacity="0.4";try{const t=(await new EyeDropper().open({signal:D.signal})).sRGBHex;w.value=t,W(t),window.htmx.trigger("#hidden-input","send-color"),X.addAction(t)}catch{v.style.opacity="1"}},F=s=>{const t=s.target.closest(".add-icon");if(!t){E(!0);return}t.classList.add("animate"),setTimeout(()=>t.classList.remove("animate"),210);const i=t.parentElement.dataset.name;!!t.parentElement.dataset.webtone&&se(K(i))};return(()=>{var s=oe(),o=s.firstChild,t=o.firstChild,i=o.nextSibling,x=i.nextSibling,h=x.firstChild,l=p;typeof l=="function"?g(l,t):p=t,N(s,k(A,{when:!1,get children(){var a=re(),d=a.firstChild,r=P;return typeof r=="function"?g(r,d):P=d,T(c=>{var n=y("mt-28 flex w-full justify-center"),b=y("relative h-12 min-w-44 border border-neutral-500 bg-neutral-800 uppercase transition-transform duration-100 hover:scale-[1.01]");return n!==c.e&&C(a,c.e=n),b!==c.t&&C(d,c.t=b),c},{e:void 0,t:void 0}),a}}),i);var e=w;typeof e=="function"?g(e,i):w=i,h.$$click=F;var u=v;return typeof u=="function"?g(u,h):v=h,N(s,k(A,{get when(){return R()},get children(){return k(Y,{ref:B,active:q,setPortal:E})}}),null),T(a=>{var d=y("mt-28 flex w-full justify-center"),r=y("relative h-12 min-w-44 border border-neutral-500 bg-neutral-800 uppercase transition-transform duration-100 hover:scale-[1.01]"),c=L.api;return d!==a.e&&C(o,a.e=d),r!==a.t&&C(t,a.t=r),c!==a.a&&ee(i,"hx-get",a.a=c),a},{e:void 0,t:void 0,a:void 0}),s})();function I(){const s=()=>{window.htmx.process(document.body),window.htmx.config.withCredentials=!0,window.htmx.config.globalViewTransitions=!0,window.htmx.config.methodsThatUseUrlParams=[],addEventListener("htmx:beforeRequest",i),addEventListener("htmx:configRequest",t),addEventListener("htmx:afterSwap",x),addEventListener("htmx:afterSettle",h)},o=()=>{window.htmx.config.withCredentials=!1,removeEventListener("htmx:beforeRequest",i),removeEventListener("htmx:configRequest",t),removeEventListener("htmx:afterSwap",x),removeEventListener("htmx:afterSettle",h)},t=l=>{const u=l.detail.parameters.colors.substring(1);if(L.api.includes("localhost")){l.detail.path=L.api+u;return}l.detail.path+=u},i=l=>{l.detail.xhr.setRequestHeader("Authorization","edor-o9e8-f5p7-x85v")},x=l=>{v.style.opacity="1",ae(S(),!0)},h=async l=>{const e=window.jsonData.conversions.web,u=e.hueClass,a=e.shadeClass,d=e.chromaClass;let r=null;if(u===0&&a===0&&d===0){const n=/\d+/,b=e.code.match(n);b&&(r=`[-1,${b[0]},-1]`)}H()==0?($(n=>n+1),f(r?`[${r},`:`[[${e.hueClass},${e.shadeClass},${e.chromaClass}],`)):H()==1?($(n=>n+1),f(r?n=>n+`${r},`:n=>n+`[${e.hueClass},${e.shadeClass},${e.chromaClass}],`)):(f(r?n=>n+`${r}]`:n=>n+`[${e.hueClass},${e.shadeClass},${e.chromaClass}]]`),$(0));const c=K(e.code);_(c)};return{initHtmx:s,cleanupHtmx:o}}};te(["click"]);export{me as default};
