import{c as v,o as I,f as P,k as A,p as g,h as D,J as L,j as R,K as W,t as F,Y as C}from"./index-Byt9_IjQ.js";const q="#fefefe",M="#353535",G=(t,c=!1)=>{const s=document.querySelector("#idMessage"),e=z(s.dataset.color);U(t,e)},U=(t,c,s)=>{t.startsWith("#")&&(t=t.substring(1));const e=X(t),r=document.querySelector(".base-color"),l=document.querySelector(".webtone-color");document.querySelectorAll(".add-icon"),r.style.color=e,l.style.color=e;const n=document.querySelector("#color-picker");n&&(n.style.color=e),c?H(e,c):H(e,"0")},X=t=>{const c=e=>{const r=s(e),l=r.r/255,n=r.g/255,d=r.b/255;return l*.299+n*.587+d*.114},s=e=>{const r=parseInt(e.substring(0,2),16),l=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return{r,g:l,b:n}};return t.startsWith("#")&&(t=t.slice(1)),c(t)>.5?M:q};function H(t,c){var r,l,n,d;let s=null;for(const o of document.styleSheets){if((r=o==null?void 0:o.href)!=null&&r.includes("tailwind")){s=o;break}(l=o==null?void 0:o.href)!=null&&l.includes("typekit")||(n=o==null?void 0:o.href)!=null&&n.includes("google")||((d=o==null?void 0:o.cssRules)==null?void 0:d.length)<30||(s=o)}let e=[...s.cssRules].filter(o=>o.selectorText==="abbr:hover:not(#wiki)")[0];e&&(t===q?e.style.color=`hsl(${c}, 42%, 60%)`:e.style.color=`hsl(${c}, 32%, 33%)`)}function z(t){if(!t)return"#252525";const c=/hsl\(([\d.]+),\s*([\d.]+)%,\s*([\d.]+)%\)/,s=t.match(c);if(s&&s.length===4){const e=parseFloat(s[1]);return Math.round(e).toString()}}var J=F('<main class="container relative mx-auto flex min-h-[2200px] max-w-5xl flex-col items-center justify-start"><nav><button id=start-button><span id=button-text class="select-none text-base tracking-wide text-neutral-100">Pick Color</span></button></nav><input id=hidden-input hx-get=http://localhost:4005/webtone/ hx-trigger=send-color hx-target=#output type=hidden name=colors><section class="mt-12 flex min-h-96 w-full justify-center"><article class="mb-28 mt-12 flex items-center justify-center"id=output>');const S="http://localhost:4005/webtone/",V=()=>{v(null);const[t,c]=v("#e8e4da"),[s,e]=v(!1);let r,l,n,d;const o=new AbortController;I(()=>{T(),d.value=t(),l.addEventListener("click",b)}),P(()=>{l.removeEventListener("click",b),$()}),A(()=>{s()?_():K()});const{initHtmx:T,cleanupHtmx:$}=j(),{handleKeys:_,removeKeys:K}=N(e,r),b=async m=>{n.style.opacity="0.4";try{const a=(await new EyeDropper().open({signal:o.signal})).sRGBHex;d.value=a,c(a),window.htmx.trigger("#hidden-input","send-color")}catch{n.style.opacity="1"}},B=m=>{const i=m.target.closest(".add-icon");if(!i)return;i.classList.add("animate"),setTimeout(()=>{i.classList.remove("animate")},210);const a=i.parentElement.dataset.color,h=i.parentElement.dataset.name;!!i.parentElement.dataset.webtone?C({name:h,color:a,index:-1}):C({name:h,color:a,index:void 0})};return(()=>{var m=J(),f=m.firstChild,i=f.firstChild,a=f.nextSibling,h=a.nextSibling,u=h.firstChild,p=l;typeof p=="function"?g(p,i):l=i;var x=d;typeof x=="function"?g(x,a):d=a,u.$$click=B;var w=n;return typeof w=="function"?g(w,u):n=u,D(y=>{var E=L("mt-28 flex w-full justify-center"),k=L("relative h-12 min-w-44 border border-neutral-500 bg-neutral-800 uppercase transition-transform duration-100 hover:scale-[1.01]");return E!==y.e&&R(f,y.e=E),k!==y.t&&R(i,y.t=k),y},{e:void 0,t:void 0}),m})();function j(){const m=()=>{window.htmx.process(document.body),window.htmx.config.withCredentials=!0,window.htmx.config.globalViewTransitions=!0,window.htmx.config.methodsThatUseUrlParams=[],addEventListener("htmx:beforeRequest",a),addEventListener("htmx:configRequest",i),addEventListener("htmx:afterSwap",h)},f=()=>{window.htmx.config.withCredentials=!1,removeEventListener("htmx:beforeRequest",a),removeEventListener("htmx:configRequest",i),removeEventListener("htmx:afterSwap",h)},i=u=>{const x=u.detail.parameters.colors.substring(1);if(S.includes("localhost")){u.detail.path=S+x;return}u.detail.path+=x},a=u=>{u.detail.xhr.setRequestHeader("Authorization","edor-o9e8-f5p7-x85v")},h=u=>{n.style.opacity="1",setTimeout(()=>{},100),G(t(),!0)};return{initHtmx:m,cleanupHtmx:f}}};function N(t,c){const s=()=>{addEventListener("keydown",r),document.getElementById("root").style.filter="blur(5px)",setTimeout(()=>{addEventListener("click",l)},0)},e=()=>{removeEventListener("keydown",r),removeEventListener("click",l),document.getElementById("root").style.filter="none"},r=n=>{(n.key==="Escape"||n.key==="Enter"||n.key==="Backspace")&&t(!1)},l=n=>{n.target!==c&&t(!1)};return{handleKeys:s,removeKeys:e}}W(["click"]);export{V as default};
