import{c as g,o as I,f as P,k as D,p,h as W,J as C,j as H,r as F,K as M,t as G,Y as S,Z as b}from"./index-BsqFNbNg.js";const T="#fefefe",U="#353535",X=(t,l=!1)=>{const s=document.querySelector("#idMessage"),e=N(s.dataset.color);z(t,e)},z=(t,l,s)=>{t.startsWith("#")&&(t=t.substring(1));const e=J(t),r=document.querySelector(".base-color"),i=document.querySelector(".webtone-color");document.querySelectorAll(".add-icon"),r.style.color=e,i.style.color=e;const n=document.querySelector("#color-picker");n&&(n.style.color=e),l?q(e,l):q(e,"0")},J=t=>{const l=e=>{const r=s(e),i=r.r/255,n=r.g/255,d=r.b/255;return i*.299+n*.587+d*.114},s=e=>{const r=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return{r,g:i,b:n}};return t.startsWith("#")&&(t=t.slice(1)),l(t)>.5?U:T};function q(t,l){var r,i,n,d;let s=null;for(const o of document.styleSheets){if((r=o==null?void 0:o.href)!=null&&r.includes("tailwind")){s=o;break}(i=o==null?void 0:o.href)!=null&&i.includes("typekit")||(n=o==null?void 0:o.href)!=null&&n.includes("google")||((d=o==null?void 0:o.cssRules)==null?void 0:d.length)<30||(s=o)}let e=[...s.cssRules].filter(o=>o.selectorText==="abbr:hover:not(#wiki)")[0];e&&(t===T?e.style.color=`hsl(${l}, 42%, 60%)`:e.style.color=`hsl(${l}, 32%, 33%)`)}function N(t){if(!t)return"#252525";const l=/hsl\(([\d.]+),\s*([\d.]+)%,\s*([\d.]+)%\)/,s=t.match(l);if(s&&s.length===4){const e=parseFloat(s[1]);return Math.round(e).toString()}}var O=G('<main class="container relative mx-auto flex min-h-[2200px] max-w-5xl flex-col items-center justify-start"><nav><button id=start-button><span id=button-text class="select-none text-base tracking-wide text-neutral-100">Pick Color</span></button></nav><input id=hidden-input hx-trigger=send-color hx-target=#output type=hidden name=colors><section class="mt-12 flex min-h-96 w-full justify-center"><article class="mb-28 mt-12 flex items-center justify-center"id=output>');const Z=()=>{g(null);const[t,l]=g("#e8e4da"),[s,e]=g(!1);let r,i,n,d;const o=new AbortController;I(()=>{$(),d.value=t(),i.addEventListener("click",w)}),P(()=>{i.removeEventListener("click",w),_()}),D(()=>{s()?K():B()});const{initHtmx:$,cleanupHtmx:_}=A(),{handleKeys:K,removeKeys:B}=V(e,r),w=async m=>{n.style.opacity="0.4";try{const a=(await new EyeDropper().open({signal:o.signal})).sRGBHex;d.value=a,l(a),window.htmx.trigger("#hidden-input","send-color")}catch{n.style.opacity="1"}},j=m=>{const c=m.target.closest(".add-icon");if(!c)return;c.classList.add("animate"),setTimeout(()=>{c.classList.remove("animate")},210);const a=c.parentElement.dataset.color,h=c.parentElement.dataset.name;!!c.parentElement.dataset.webtone?S({name:h,color:a,index:-1}):S({name:h,color:a,index:void 0})};return(()=>{var m=O(),f=m.firstChild,c=f.firstChild,a=f.nextSibling,h=a.nextSibling,u=h.firstChild,y=i;typeof y=="function"?p(y,c):i=c;var x=d;typeof x=="function"?p(x,a):d=a,u.$$click=j;var E=n;return typeof E=="function"?p(E,u):n=u,W(v=>{var k=C("mt-28 flex w-full justify-center"),L=C("relative h-12 min-w-44 border border-neutral-500 bg-neutral-800 uppercase transition-transform duration-100 hover:scale-[1.01]"),R=b.api;return k!==v.e&&H(f,v.e=k),L!==v.t&&H(c,v.t=L),R!==v.a&&F(a,"hx-get",v.a=R),v},{e:void 0,t:void 0,a:void 0}),m})();function A(){const m=()=>{window.htmx.process(document.body),window.htmx.config.withCredentials=!0,window.htmx.config.globalViewTransitions=!0,window.htmx.config.methodsThatUseUrlParams=[],addEventListener("htmx:beforeRequest",a),addEventListener("htmx:configRequest",c),addEventListener("htmx:afterSwap",h)},f=()=>{window.htmx.config.withCredentials=!1,removeEventListener("htmx:beforeRequest",a),removeEventListener("htmx:configRequest",c),removeEventListener("htmx:afterSwap",h)},c=u=>{const x=u.detail.parameters.colors.substring(1);if(b.api.includes("localhost")){u.detail.path=b.api+x;return}u.detail.path+=x},a=u=>{u.detail.xhr.setRequestHeader("Authorization","edor-o9e8-f5p7-x85v")},h=u=>{n.style.opacity="1",setTimeout(()=>{},100),X(t(),!0)};return{initHtmx:m,cleanupHtmx:f}}};function V(t,l){const s=()=>{addEventListener("keydown",r),document.getElementById("root").style.filter="blur(5px)",setTimeout(()=>{addEventListener("click",i)},0)},e=()=>{removeEventListener("keydown",r),removeEventListener("click",i),document.getElementById("root").style.filter="none"},r=n=>{(n.key==="Escape"||n.key==="Enter"||n.key==="Backspace")&&t(!1)},i=n=>{n.target!==l&&t(!1)};return{handleKeys:s,removeKeys:e}}M(["click"]);export{Z as default};
